# 질문
railway의 websocket-server 배포에 실패했습니다.
에러 로그
npm error
npm error To see a list of scripts, run:
npm warn config production Use `--omit=dev` instead.
npm error Missing script: "ws"
... (로그 생략)

knowledge_base.embedding에 이미 값이 들어가 있는지에 대한 확인
... (쿼리 결과: embedding 모두 null)

모두 null로 입력되어 있어 1번으로 진행하겠습니다.
(혹시나 하여 매우 중요한 결정을 공유합니다. agent에서 연결되어 있지 않은 KB로 답변하는 것은 절대 금지입니다)

#답변
Railway의 “Missing script: ws”는 **배포된 커밋에 `package.json`의 `ws` 스크립트가 없는 상태**이거나, Start Command가 최신 코드 적용 전에 실행된 경우에 발생합니다.

해결 방법
1) Railway에서 websocket-server 서비스의 소스 브랜치/커밋이 **최신 커밋인지 확인**
2) 최신 커밋으로 재배포(Deploy) 실행
3) Start Command는 `npm run ws` 유지

KB 임베딩 파이프라인은 **작성/수정 시 즉시 생성(동기식)**으로 확정했습니다. 체크리스트에 반영했습니다.

또한 “에이전트에 연결되지 않은 KB로 답변 금지” 정책을 기본 규칙으로 반영하여 구현하겠습니다.

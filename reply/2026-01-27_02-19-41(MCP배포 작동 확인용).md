# 질문
배포된 상태에서 검증하는 쿼리들을 제공해주세요.

https://www.mejai.help/ 페이지에서 확인하고자 합니다.

# 답변
아래 코드를 **https://www.mejai.help/** 페이지의 브라우저 콘솔에서 그대로 실행하면 됩니다. (로그인 상태 필요)

1) 토큰 추출 + `find_customer_by_phone` 검증
```js
const key = Object.keys(localStorage).find(k => k.includes("auth-token"));
const raw = localStorage.getItem(key || "");
const token = raw ? (JSON.parse(raw).access_token || JSON.parse(atob(raw)).access_token) : "";

fetch("/api/mcp/tools/call", {
  method: "POST",
  headers: { "Content-Type": "application/json", "Authorization": "Bearer " + token },
  body: JSON.stringify({ tool: "find_customer_by_phone", params: { member_id: "mejai", debug: true } })
}).then(r => r.json())
  .then(res => console.log(JSON.stringify(res)));
```

2) `lookup_order` 요약/마스킹 검증
```js
fetch("/api/mcp/tools/call", {
  method: "POST",
  headers: { "Content-Type": "application/json", "Authorization": "Bearer " + token },
  body: JSON.stringify({ tool: "lookup_order", params: { order_id: "20260127-0000014", customer_verification_token: "TEST" } })
}).then(r => r.json())
  .then(res => console.log(JSON.stringify(res)));
```

3) `_debug`만 확인 (정상 쿼리 확인용)
```js
fetch("/api/mcp/tools/call", {
  method: "POST",
  headers: { "Content-Type": "application/json", "Authorization": "Bearer " + token },
  body: JSON.stringify({ tool: "find_customer_by_phone", params: { member_id: "mejai", debug: true } })
}).then(r => r.json())
  .then(res => console.log(res.data?._debug || res));
```

원하시면 위 내용을 `reply` 폴더에 테스트 스크립트 파일로도 추가해 드리겠습니다.

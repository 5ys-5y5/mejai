# 질문
현재 배포 후 테스트중인 상황입니다.

agent: 에이전트 구성(LLM, MCP, KB)을 기반으로 대화를 테스트하는 영역입니다.
customer: 주문 정보를 수정하고 싶어요
agent: 어떤 주문 정보를 수정하시고 싶으신가요? (예: 배송 주소, 연락처, 주문 상품 등)
customer: 제 주문 번호는 20260127-0000014입니다.
agent: 1. 고객이 주문 번호 20260127-0000014를 제공함.
customer: 제 주문 정보를 수정하고 싶다구요
agent: 1. 고객이 주문 정보를 수정하고자 함

답을 하긴 하지만 소비자가 궁금해하는 부분을 전혀 이해하지 못하고 해결을 지원하지 못하고 있습니다.

1. 문제가 무엇인가요?
2. 어떻게 해결할 수 있나요?

#답변
문제 요약
1) 확인(되묻기) 루프가 끝나지 않고 요약만 계속 반환되고 있습니다. 사용자가 “확인/네”로 답하지 않으면 다음 단계(조회/조치/최종 답변)로 넘어가지 않게 설계되어 있습니다.
2) 주문번호 추출 로직이 숫자만 인식하도록 되어 있어 `20260127-0000014` 같은 하이픈 포함 형식이 인식되지 않습니다. 그래서 Cafe24 조회가 실행되지 않습니다.

해결 방안
1) 확인 루프 완료 조건 개선
   - “주문번호/요청/정정” 등 핵심 정보가 들어오면 확인 응답을 기다리지 않고 다음 단계로 진행하거나,
   - 확인 질문을 더 명시적으로 바꾸고, 1~2회 실패 시 자동 진행/에스컬레이션.
2) 주문번호 파서 개선
   - 하이픈 포함 주문번호를 인식하도록 정규식 확장.
   - 예: `20260127-0000014`, `20260127-0000014-01` 등 대응.

원하시면 바로 코드 수정으로 반영하겠습니다.

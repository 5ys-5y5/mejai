# 질문
코드를 반영해주세요.

또한 현재 MCP로 할 수 있는 모든 것을 테스트해볼 수 있도록 KB를 설계해주세요.
그대로 입력해서 테스트하고자 합니다.

에이전트 구성(LLM, MCP, KB)을 기반으로 대화를 테스트하는 영역입니다.
주문 정보를 수정하고 싶어요. 주문번호는 20260127-0000014입니다.
오류: KB_NOT_ACTIVE

... (KB 버전 정보와 버전 1.1 동일 문제 설명)

#답변
반영 완료했습니다.

구현 변경
- 주문번호 파서 개선: 하이픈 포함 주문번호 인식
- 확인(되묻기) 루프 개선: 주문번호만 전달하거나 같은 요청 반복 시 자동 진행
- KB 버전 생성 시 버전값이 동일하면 `-rev1`로 자동 보정
- KB 새 버전 생성 시 해당 KB를 쓰는 에이전트를 새 버전으로 자동 갱신(에이전트 버전 생성/구버전 비활성)

테스트용 KB 제공
- `docs/kb_test_pack.md`에 MCP 전 기능(주문조회/배송조회/티켓 생성) 테스트용 KB 문서를 정리했습니다.

KB_NOT_ACTIVE 해결
- 현재 에이전트가 비활성 KB 버전을 바라보고 있어 발생합니다.
- 에이전트 설정에서 KB를 활성 버전으로 다시 선택하거나, KB를 한 번 더 저장하여 새 버전을 생성하면 자동으로 에이전트가 갱신됩니다.

# Reply Style 시뮬레이션 케이스

아래 케이스는 `src/app/api/runtime/chat/runtime/replyStyleRuntime.ts` 기준으로 스타일 적용 결과를 점검하기 위한 샘플입니다.

## 공통 기준
- `원본 답변`: LLM/정책 단계에서 만들어진 원문
- `적용 후 기대 답변`: `applyReplyStyle` 적용 후 기대되는 최종 텍스트
- 실제 운영에서는 KB 본문(`primaryKbContent`, `adminKbContents`)에서 스타일을 감지합니다.

---

## CASE 1: 용 종결 강제
### KB 스타일 설정
```text
말투: 친근한 존댓말
지시: 대답할 때는 반드시 끝에 "용"으로 끝내주세요.
```

### 원본 답변
```text
재입고 예정일은 4월 1일입니다.
```

### 적용 후 기대 답변
```text
재입고 예정일은 4월 1일입니다용
```

---

## CASE 2: formal(합니다체)
### KB 스타일 설정
```text
말투: 공식 안내, 정중한 합니다체
태도: 존중
```

### 원본 답변
```text
주문 상태를 확인해드려요.
```

### 적용 후 기대 답변
```text
주문 상태를 확인해드립니다.
```

---

## CASE 3: polite(해요체)
### KB 스타일 설정
```text
말투: 해요체
무드: 부드럽고 친절하게
```

### 원본 답변
```text
확인 결과 배송이 시작되었습니다
```

### 적용 후 기대 답변
```text
확인 결과 배송이 시작되었습니다.
필요하시면 이어서 도와드릴게요.
```

---

## CASE 4: casual(반말)
### KB 스타일 설정
```text
말투: 반말, 친구처럼 편하게
뉘앙스: 캐주얼
```

### 원본 답변
```text
지금 조회해볼게요.
```

### 적용 후 기대 답변
```text
지금 조회해볼게.
```

---

## CASE 5: calm(차분)
### KB 스타일 설정
```text
무드: 차분하고 안정적으로
태도: 침착
```

### 원본 답변
```text
확인되었습니다!!! 잠시만 기다려주세요??
```

### 적용 후 기대 답변
```text
확인되었습니다. 잠시만 기다려주세요?
```

---

## CASE 6: bright(밝음)
### KB 스타일 설정
```text
무드: 밝고 경쾌하게
뉘앙스: energetic
```

### 원본 답변
```text
문의하신 내용 확인했습니다.
```

### 적용 후 기대 답변
```text
문의하신 내용 확인했습니다!
```

---

## CASE 7: warm(따뜻함)
### KB 스타일 설정
```text
태도: 공감과 친절
무드: 따뜻하게
```

### 원본 답변
```text
환불 접수는 완료되었습니다.
```

### 적용 후 기대 답변
```text
환불 접수는 완료되었습니다.
필요하시면 이어서 도와드릴게요.
```

---

## CASE 8: respectful + formal + warm
### KB 스타일 설정
```text
말투: formal
태도: respectful, 공손
무드: warm
```

### 원본 답변
```text
현재 처리 상태를 안내해드려요
```

### 적용 후 기대 답변
```text
현재 처리 상태를 안내해드립니다.
필요하시면 이어서 도와드리겠습니다.
```

---

## CASE 9: 복합 규칙(밝음 + 용 종결)
### KB 스타일 설정
```text
무드: 밝고 활기차게
지시: 답변은 무조건 "용"으로 끝
```

### 원본 답변
```text
입고 알림 신청이 완료되었습니다.
```

### 적용 후 기대 답변
```text
입고 알림 신청이 완료되었습니다!용
```

---

## CASE 10: 필드 없이 본문 키워드 인식
### KB 스타일 설정
```text
고객 응대 원칙:
- 전체 응답은 간결하게 작성
- 차분한 톤 유지
- 필요한 경우 공감 표현
```

### 원본 답변
```text
네!!! 배송이 시작됐고요   송장도 등록됐습니다.
```

### 적용 후 기대 답변
```text
네. 배송이 시작됐고요 송장도 등록됐습니다.
필요하시면 이어서 도와드릴게요.
```

---

## 빠른 수동 점검 절차
1. 테스트용 KB에 각 케이스의 스타일 설정을 저장합니다.
2. 런타임 채팅에서 동일 질문을 전송합니다.
3. `D_conv_turns.final_answer`가 기대 응답과 동일한지 확인합니다.
4. 필요 시 `bot_context`와 `FINAL_ANSWER_READY` 이벤트를 함께 확인합니다.
